os: osx
branches:
  except:
  - av/*
env:
  matrix:
  - PATH=$PATH:/usr/local/opt/qt5/bin
  global:
    - APPLICATION_CERTIFICATE='"3rd Party Mac Developer Application: Phonations (Y44UPVP368)"'
    - secure: JnQLoFDGDtr3g1vrnJHZ1UxdAtZ+TgLY73GgLIxfkoRn/ClaXarHRcGKDdfkK7lIZx2lEFYAwbG6bOIn6msD/NTaveqeyWNeCa5c6VZdr2HynhHT8/IPC2J7gG4ikakZ92TUASDjPSsh96nQ4ZCi8AOVySx688cRVZmtdSEeQfk=
before_script:
  #- brew update > /dev/null
  #- brew install qt5
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in mac_app.cer.enc -d -a -out mac_app.cer
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in pouet.txt.enc -d -a -out pouet.txt
- security create-keychain -p travis macos-build.keychain
- security default-keychain -s macos-build.keychain
- security unlock-keychain -p travis macos-build.keychain
- security set-keychain-settings -t 3600 -l ~/Library/Keychains/macos-build.keychain
- security import ./mac_app.cer -k ~/Library/Keychains/macos-build.keychain -T /usr/bin/codesign
- security find-identity
script:
  - echo $APPLICATION_CERTIFICATE
  #- qmake QtTest.pro
  #- make
  - ls -l
  - cat pouet.txt
notifications:
  email: false
  slack:
    secure: ZYfEOfq2hgRNtb491t5Fsl1dw4vXfmBsHbOowZEFvICNopAddwwJehMZPZr3ygEsrvuR95W+vXrAsySNnbTg++SiTviNN8Md9zN/YAfgxY5IXL/QuCPfchgJ+w5oWKoq11BH5oL86EfjG8ZrgDMQ3WxOI2qcfoJ8TSXNB1dhxSE=
