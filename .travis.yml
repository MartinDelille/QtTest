os: osx
branches:
  except:
  - av/*
env:
  matrix:
  - PATH=$PATH:/usr/local/opt/qt5/bin
  global:
    - APPLICATION_CERTIFICATE='"3rd Party Mac Developer Application: Phonations (Y44UPVP368)"'
    - secure: JnQLoFDGDtr3g1vrnJHZ1UxdAtZ+TgLY73GgLIxfkoRn/ClaXarHRcGKDdfkK7lIZx2lEFYAwbG6bOIn6msD/NTaveqeyWNeCa5c6VZdr2HynhHT8/IPC2J7gG4ikakZ92TUASDjPSsh96nQ4ZCi8AOVySx688cRVZmtdSEeQfk=
before_script:
  #- brew update > /dev/null
  #- brew install qt5
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in mac_app.cer.enc -d -a -out mac_app.cer
#- ./add-key.sh
script:
  - echo $APPLICATION_CERTIFICATE
  #- qmake QtTest.pro
  #- make
  - security import ./mac_app.cer -k ~/Library/Keychains/login.keychain -T /usr/bin/codesign
  - security list-keychains
  - security find-identity
notifications:
  email: false
  slack:
    secure: ZYfEOfq2hgRNtb491t5Fsl1dw4vXfmBsHbOowZEFvICNopAddwwJehMZPZr3ygEsrvuR95W+vXrAsySNnbTg++SiTviNN8Md9zN/YAfgxY5IXL/QuCPfchgJ+w5oWKoq11BH5oL86EfjG8ZrgDMQ3WxOI2qcfoJ8TSXNB1dhxSE=
